<?xml version="1.0"?>
<launch>

	<arg name="robot" default="$(optenv ROBOT !!NO_ROBOT_SET!!)"/>
	<arg name="robot_env" default="$(optenv ROBOT_ENV !!NO_ROBOT_ENV_SET!!)"/>
	<arg name="map" default="$(find cob_default_env_config)/$(arg robot_env)/map.yaml" />

	<!--- Run map_server -->
	<node name="map_server" pkg="map_server" type="map_server" args="$(arg map)"/>

	<!--- Run AMCL -->
	<include file="$(find cob_navigation_global)/launch/amcl_node.xml" >
		<arg name="robot" value="$(arg robot)"/>
	</include>
	
	
	<!--- Run move base -->
	<include file="$(find cob_navigation_global)/launch/2dnav_ros_dwa.xml" >
		<arg name="robot" value="$(arg robot)"/>
	</include>

	<!-- start footprint observer node for navigation -->
	<node pkg="cob_footprint_observer" type="footprint_observer" name="footprint_observer" output="screen">
		<rosparam file="$(find cob_hardware_config)/$(arg robot)/config/footprint_observer_params.yaml" command="load" />
		<remap from="~robot_footprint" to="/move_base/local_costmap/footprint" />		
	</node>
	<node pkg="topic_tools" type="relay" name="footprint_relay" args="/move_base/local_costmap/footprint /move_base/global_costmap/footprint"/>
	<!--
	<include file="$(find cob_navigation_global)/launch/voxel_grid_filter.xml" />-->

	


</launch>
